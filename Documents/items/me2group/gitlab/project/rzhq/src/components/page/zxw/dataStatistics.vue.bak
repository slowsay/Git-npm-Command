<template>
    <div>
        <div class="crumbs">
            <el-breadcrumb separator="/">
                <el-breadcrumb-item>
                    <i class="el-icon-lx-calendar"></i> 数据统计
                </el-breadcrumb-item>
            </el-breadcrumb>
        </div>
        <div class="container">
            <!-- app端访问量 -->
            <div class="visit">
                <div id="myVisit" :style="{width:'900px',height:'300px'}"></div>
                <div class="rightbox">
                    <div class="box">
                        <p>今日访问量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本周访问量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本月访问量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>访问量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                </div>
            </div>
            <!-- 用户统计-添加用户 -->
            <div class="visit">
                <div id="userLine" :style="{width:'900px',height:'300px'}"></div>
                <div class="rightbox">
                    <div class="box">
                        <p>今日注册量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本周注册量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本月注册量</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>总用户人数</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                </div>
            </div>
            <!-- 用户统计-活跃用户 -->
            <div class="visit">
                <div id="activeUser" :style="{width:'900px',height:'300px'}"></div>
                <div class="rightbox">
                    <div class="box">
                        <p>今日活跃用户</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本周活跃用户</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>本月活跃用户</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                    <div class="box">
                        <p>总用户人数</p>

                        <p>{{form.todayVisit}}</p>
                    </div>
                </div>
            </div>
            <!-- 用户使用时长 -->
            <div class="user">
                <p class="title">用户使用时长</p>

                <div class="formBox">
                    <div class="block">
                        <span class="demonstration">选择时间</span>
                        <el-date-picker
                            v-model="value1"
                            align="right"
                            type="date"
                            placeholder="选择日期"
                            :picker-options="pickerOptions"
                        ></el-date-picker>
                    </div>
                    <div class="itemBox">
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>日平均时长</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>周平均时长</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>月平均时长</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 用户存留率 -->
            <div class="user">
                <p class="title">用户存留率</p>

                <div class="formBox">
                    <div class="block">
                        <span class="demonstration">选择时间</span>
                        <el-date-picker
                            v-model="value2"
                            align="right"
                            type="date"
                            placeholder="选择日期"
                            :picker-options="pickerOptions"
                        ></el-date-picker>
                    </div>
                    <div class="itemBox">
                        <div>
                            <p>{{form.point}}</p>

                            <p>日存活率</p>
                        </div>
                        <div>
                            <p>{{form.point}}</p>

                            <p>周存活率</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>月平均时长</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 项目统计 -->
            <div class="user">
                <p class="title">项目统计</p>

                <div class="formBox">
                    <div class="block">
                        <span class="demonstration">选择目的地</span>
                        <el-cascader :options="options" clearable></el-cascader>
                    </div>
                    <div class="itemBox">
                        <div>
                            <p>{{form.time}}</p>

                            <p>总PV</p>
                        </div>
                        <div>
                            <p>{{form.time}}</p>

                            <p>总紫外线</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总点赞</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总收藏</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总分享</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>平均停留时间</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>跳出率</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 潜点统计 -->
            <div class="user">
                <p class="title">潜点统计</p>

                <div class="formBox">
                    <div class="block">
                        <span class="demonstration">选择目的地</span>
                        <el-cascader :options="options1" clearable></el-cascader>
                    </div>
                    <div class="itemBox">
                        <div>
                            <p>{{form.time}}</p>

                            <p>总PV</p>
                        </div>
                        <div>
                            <p>{{form.time}}</p>

                            <p>总紫外线</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总点赞</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总收藏</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>总分享</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>平均停留时间</p>
                        </div>
                        <div>
                            <p>{{form.time}} 小时</p>

                            <p>跳出率</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 下载渠道统计 -->
            <div class="user">
                <p class="title">潜点统计</p>

                <div class="formBox">
                    <div class="itemBox">
                        <div>
                            <p>{{form.number}}</p>

                            <p>苹果商场</p>
                        </div>
                        <div>
                            <p>{{form.number}}</p>

                            <p>华为商城</p>
                        </div>
                        <div>
                            <p>{{form.number}} 小时</p>

                            <p>360手机助手</p>
                        </div>
                        <div>
                            <p>{{form.number}} 小时</p>

                            <p>应用宝</p>
                        </div>
                        <div>
                            <p>{{form.number}} 小时</p>

                            <p>小米应用商城</p>
                        </div>
                        <div>
                            <p>{{form.number}} 小时</p>

                            <p>平均停留时间</p>
                        </div>
                        <div>
                            <p>{{form.number}} 小时</p>

                            <p>跳出率</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 设备类型统计 -->
            <div class="user">
                <p class="title">设备类型统计</p>

                <div class="listBox">
                    <el-table :data="tableData" style="width: 100%;font-size:16px">
                        <el-table-column prop="name" label="设备类型" align="center"></el-table-column>
                        <el-table-column prop="number" label="统计机数" align="center"></el-table-column>
                    </el-table>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    export default {
        data: function () {
            return {
                headerobj: '',
                form: {
                    todayVisit: "200",
                    time: "4.5",
                    point: "50%",
                    number: "3000",
                    name: "",
                    region: "",
                    date1: "",
                    date2: "",
                    delivery: true,
                    type: ["步步高"],
                    resource: "小天才",
                    desc: "",
                    options: []
                },
                //时间选择器
//                pickerOptions: {
//                    disabledDate: function (time) {
//                        return time.getTime() > Date.now();
//                    },
//                    shortcuts: [
//                        {
//                            text: "今天",
//                            onClick: function (picker) {
//                                picker.$emit("pick", new Date());
//                            }
//                        },
//                        {
//                            text: "昨天",
//                            onClick: function (picker) {
//                                const date = new Date();
//                                date.setTime(date.getTime() - 3600 * 1000 * 24);
//                                picker.$emit("pick", date);
//                            }
//                        },
//                        {
//                            text: "一周前",
//                            onClick: function (picker) {
//                                const date = new Date();
//                                date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);
//                                picker.$emit("pick", date);
//                            }
//                        }
//                    ]
//                },
                //地址选择器
                options: [
                    {
                        value: "zhinan",
                        label: "指南",
                        children: [
                            {
                                value: "shejiyuanze",
                                label: "设计原则",
                                children: [
                                    {
                                        value: "yizhi",
                                        label: "一致"
                                    },
                                    {
                                        value: "fankui",
                                        label: "反馈"
                                    },
                                    {
                                        value: "xiaolv",
                                        label: "效率"
                                    },
                                    {
                                        value: "kekong",
                                        label: "可控"
                                    }
                                ]
                            },
                            {
                                value: "daohang",
                                label: "导航",
                                children: [
                                    {
                                        value: "cexiangdaohang",
                                        label: "侧向导航"
                                    },
                                    {
                                        value: "dingbudaohang",
                                        label: "顶部导航"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        value: "zujian",
                        label: "组件",
                        children: [
                            {
                                value: "basic",
                                label: "Basic",
                                children: [
                                    {
                                        value: "layout",
                                        label: "Layout 布局"
                                    },
                                    {
                                        value: "color",
                                        label: "Color 色彩"
                                    },
                                    {
                                        value: "typography",
                                        label: "Typography 字体"
                                    },
                                    {
                                        value: "icon",
                                        label: "Icon 图标"
                                    },
                                    {
                                        value: "button",
                                        label: "Button 按钮"
                                    }
                                ]
                            },
                            {
                                value: "form",
                                label: "Form",
                                children: [
                                    {
                                        value: "radio",
                                        label: "Radio 单选框"
                                    },
                                    {
                                        value: "checkbox",
                                        label: "Checkbox 多选框"
                                    },
                                    {
                                        value: "input",
                                        label: "Input 输入框"
                                    },
                                    {
                                        value: "input-number",
                                        label: "InputNumber 计数器"
                                    },
                                    {
                                        value: "select",
                                        label: "Select 选择器"
                                    },
                                    {
                                        value: "cascader",
                                        label: "Cascader 级联选择器"
                                    },
                                    {
                                        value: "switch",
                                        label: "Switch 开关"
                                    },
                                    {
                                        value: "slider",
                                        label: "Slider 滑块"
                                    },
                                    {
                                        value: "time-picker",
                                        label: "TimePicker 时间选择器"
                                    },
                                    {
                                        value: "date-picker",
                                        label: "DatePicker 日期选择器"
                                    },
                                    {
                                        value: "datetime-picker",
                                        label: "DateTimePicker 日期时间选择器"
                                    },
                                    {
                                        value: "upload",
                                        label: "Upload 上传"
                                    },
                                    {
                                        value: "rate",
                                        label: "Rate 评分"
                                    },
                                    {
                                        value: "form",
                                        label: "Form 表单"
                                    }
                                ]
                            },
                            {
                                value: "data",
                                label: "Data",
                                children: [
                                    {
                                        value: "table",
                                        label: "Table 表格"
                                    },
                                    {
                                        value: "tag",
                                        label: "Tag 标签"
                                    },
                                    {
                                        value: "progress",
                                        label: "Progress 进度条"
                                    },
                                    {
                                        value: "tree",
                                        label: "Tree 树形控件"
                                    },
                                    {
                                        value: "pagination",
                                        label: "Pagination 分页"
                                    },
                                    {
                                        value: "badge",
                                        label: "Badge 标记"
                                    }
                                ]
                            },
                            {
                                value: "notice",
                                label: "Notice",
                                children: [
                                    {
                                        value: "alert",
                                        label: "Alert 警告"
                                    },
                                    {
                                        value: "loading",
                                        label: "Loading 加载"
                                    },
                                    {
                                        value: "message",
                                        label: "Message 消息提示"
                                    },
                                    {
                                        value: "message-box",
                                        label: "MessageBox 弹框"
                                    },
                                    {
                                        value: "notification",
                                        label: "Notification 通知"
                                    }
                                ]
                            },
                            {
                                value: "navigation",
                                label: "Navigation",
                                children: [
                                    {
                                        value: "menu",
                                        label: "NavMenu 导航菜单"
                                    },
                                    {
                                        value: "tabs",
                                        label: "Tabs 标签页"
                                    },
                                    {
                                        value: "breadcrumb",
                                        label: "Breadcrumb 面包屑"
                                    },
                                    {
                                        value: "dropdown",
                                        label: "Dropdown 下拉菜单"
                                    },
                                    {
                                        value: "steps",
                                        label: "Steps 步骤条"
                                    }
                                ]
                            },
                            {
                                value: "others",
                                label: "Others",
                                children: [
                                    {
                                        value: "dialog",
                                        label: "Dialog 对话框"
                                    },
                                    {
                                        value: "tooltip",
                                        label: "Tooltip 文字提示"
                                    },
                                    {
                                        value: "popover",
                                        label: "Popover 弹出框"
                                    },
                                    {
                                        value: "card",
                                        label: "Card 卡片"
                                    },
                                    {
                                        value: "carousel",
                                        label: "Carousel 走马灯"
                                    },
                                    {
                                        value: "collapse",
                                        label: "Collapse 折叠面板"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        value: "ziyuan",
                        label: "资源",
                        children: [
                            {
                                value: "axure",
                                label: "Axure Components"
                            },
                            {
                                value: "sketch",
                                label: "Sketch Templates"
                            },
                            {
                                value: "jiaohu",
                                label: "组件交互文档"
                            }
                        ]
                    }
                ],
                //潜点地址选择器
                options1: [
                    {
                        value: "zhinan",
                        label: "大洋洲",
                        children: [
                            {
                                value: "shejiyuanze",
                                label: "设计原则",
                                children: [
                                    {
                                        value: "yizhi",
                                        label: "一致",
                                        children: [
                                            {
                                                value: "hangzhou",
                                                label: "杭州"
                                            }
                                        ]
                                    },
                                    {
                                        value: "fankui",
                                        label: "反馈"
                                    },
                                    {
                                        value: "xiaolv",
                                        label: "效率"
                                    },
                                    {
                                        value: "kekong",
                                        label: "可控"
                                    }
                                ]
                            },
                            {
                                value: "daohang",
                                label: "导航",
                                children: [
                                    {
                                        value: "cexiangdaohang",
                                        label: "侧向导航"
                                    },
                                    {
                                        value: "dingbudaohang",
                                        label: "顶部导航"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        value: "zujian",
                        label: "组件",
                        children: [
                            {
                                value: "basic",
                                label: "Basic",
                                children: [
                                    {
                                        value: "layout",
                                        label: "Layout 布局"
                                    },
                                    {
                                        value: "color",
                                        label: "Color 色彩"
                                    },
                                    {
                                        value: "typography",
                                        label: "Typography 字体"
                                    },
                                    {
                                        value: "icon",
                                        label: "Icon 图标"
                                    },
                                    {
                                        value: "button",
                                        label: "Button 按钮"
                                    }
                                ]
                            },
                            {
                                value: "form",
                                label: "Form",
                                children: [
                                    {
                                        value: "radio",
                                        label: "Radio 单选框"
                                    },
                                    {
                                        value: "checkbox",
                                        label: "Checkbox 多选框"
                                    },
                                    {
                                        value: "input",
                                        label: "Input 输入框"
                                    },
                                    {
                                        value: "input-number",
                                        label: "InputNumber 计数器"
                                    },
                                    {
                                        value: "select",
                                        label: "Select 选择器"
                                    },
                                    {
                                        value: "cascader",
                                        label: "Cascader 级联选择器"
                                    },
                                    {
                                        value: "switch",
                                        label: "Switch 开关"
                                    },
                                    {
                                        value: "slider",
                                        label: "Slider 滑块"
                                    },
                                    {
                                        value: "time-picker",
                                        label: "TimePicker 时间选择器"
                                    },
                                    {
                                        value: "date-picker",
                                        label: "DatePicker 日期选择器"
                                    },
                                    {
                                        value: "datetime-picker",
                                        label: "DateTimePicker 日期时间选择器"
                                    },
                                    {
                                        value: "upload",
                                        label: "Upload 上传"
                                    },
                                    {
                                        value: "rate",
                                        label: "Rate 评分"
                                    },
                                    {
                                        value: "form",
                                        label: "Form 表单"
                                    }
                                ]
                            },
                            {
                                value: "data",
                                label: "Data",
                                children: [
                                    {
                                        value: "table",
                                        label: "Table 表格"
                                    },
                                    {
                                        value: "tag",
                                        label: "Tag 标签"
                                    },
                                    {
                                        value: "progress",
                                        label: "Progress 进度条"
                                    },
                                    {
                                        value: "tree",
                                        label: "Tree 树形控件"
                                    },
                                    {
                                        value: "pagination",
                                        label: "Pagination 分页"
                                    },
                                    {
                                        value: "badge",
                                        label: "Badge 标记"
                                    }
                                ]
                            },
                            {
                                value: "notice",
                                label: "Notice",
                                children: [
                                    {
                                        value: "alert",
                                        label: "Alert 警告"
                                    },
                                    {
                                        value: "loading",
                                        label: "Loading 加载"
                                    },
                                    {
                                        value: "message",
                                        label: "Message 消息提示"
                                    },
                                    {
                                        value: "message-box",
                                        label: "MessageBox 弹框"
                                    },
                                    {
                                        value: "notification",
                                        label: "Notification 通知"
                                    }
                                ]
                            },
                            {
                                value: "navigation",
                                label: "Navigation",
                                children: [
                                    {
                                        value: "menu",
                                        label: "NavMenu 导航菜单"
                                    },
                                    {
                                        value: "tabs",
                                        label: "Tabs 标签页"
                                    },
                                    {
                                        value: "breadcrumb",
                                        label: "Breadcrumb 面包屑"
                                    },
                                    {
                                        value: "dropdown",
                                        label: "Dropdown 下拉菜单"
                                    },
                                    {
                                        value: "steps",
                                        label: "Steps 步骤条"
                                    }
                                ]
                            },
                            {
                                value: "others",
                                label: "Others",
                                children: [
                                    {
                                        value: "dialog",
                                        label: "Dialog 对话框"
                                    },
                                    {
                                        value: "tooltip",
                                        label: "Tooltip 文字提示"
                                    },
                                    {
                                        value: "popover",
                                        label: "Popover 弹出框"
                                    },
                                    {
                                        value: "card",
                                        label: "Card 卡片"
                                    },
                                    {
                                        value: "carousel",
                                        label: "Carousel 走马灯"
                                    },
                                    {
                                        value: "collapse",
                                        label: "Collapse 折叠面板"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        value: "ziyuan",
                        label: "资源",
                        children: [
                            {
                                value: "axure",
                                label: "Axure Components"
                            },
                            {
                                value: "sketch",
                                label: "Sketch Templates"
                            },
                            {
                                value: "jiaohu",
                                label: "组件交互文档"
                            }
                        ]
                    }
                ],
                value1: "",
                value2: "",
                //设备类型
                tableData: [
                    {
                        number: "2016",
                        name: "苹果11"
                    },
                    {
                        number: "2016",
                        name: "苹果xr"
                    },
                    {
                        number: "2016",
                        name: "黑莓22"
                    },
                    {
                        number: "2016",
                        name: "小米8"
                    }
                ]
            };
        },
        mounted: function () {
            this.drawLine();
            this.drawUserLine();
            this.activeUser();
        },
        created: function () {
            if (localStorage.getItem("userInfo")) {
                this.userinfo = JSON.parse(localStorage.getItem("userInfo"));
                this.init();
            }
            else {
                this.$route.push('/login');
            }
        },
        methods: {
            init: function () {
                this.headerobj = {token: this.userinfo.token, userId: this.userinfo.id};
                var _this = this;
                API.request({
                    url: API.tagList,
                    method: 'post',
                    headers: this.headerobj,
                    data: API.qs.stringify({page: this.pageindex, num: this.pagesize})
                }).then(function (e) {
                    if (e.data.code == 200) {
                        if (e.data.success) {
                            _this.pagecount = e.data.total;
                            _this.data = e.data.data.list;
                        }
                    }
                }).catch(function (e) {
                    _this.$message.error(JSON.stringify(e));
                })
            },
            drawLine: function () {
                //基于准备好的dom，初始化echarts实例
                let myVisit = this.$echarts.init(document.getElementById("myVisit"));
                //绘制app访问量折线图
                myVisit.setOption({
                    title: {text: "app访问量"},
                    tooltip: {},
                    xAxis: {
                        data: [
                            "07-01周四",
                            "07-02周五",
                            "07-03周六",
                            "07-04周日",
                            "07-05周一",
                            "07-06周二",
                            "07-07周三"
                        ]
                    },
                    yAxis: {},
                    series: [
                        {
                            name: "访问数",
                            type: "line",
                            data: [5, 20, 36, 10, 10, 19, 34]
                        }
                    ]
                });
            },
            drawUserLine: function () {
                //基于准备好的dom，初始化echarts实例
                let userLine = this.$echarts.init(document.getElementById("userLine"));
                //绘制app访问量折线图
                userLine.setOption({
                    title: {text: "用户统计-添加用户"},
                    tooltip: {},
                    xAxis: {
                        data: [
                            "07-01周四",
                            "07-02周五",
                            "07-03周六",
                            "07-04周日",
                            "07-05周一",
                            "07-06周二",
                            "07-07周三"
                        ]
                    },
                    yAxis: {},
                    series: [
                        {
                            name: "注册数",
                            type: "line",
                            data: [50, 122, 363, 104, 155, 196, 347]
                        }
                    ]
                });
            },
            activeUser: function () {
                //基于准备好的dom，初始化echarts实例
                let activeUser = this.$echarts.init(
                    document.getElementById("activeUser")
                );
                //绘制app访问量折线图
                activeUser.setOption({
                    title: {text: "用户统计-活跃用户"},
                    tooltip: {},
                    xAxis: {
                        data: [
                            "07-01周四",
                            "07-02周五",
                            "07-03周六",
                            "07-04周日",
                            "07-05周一",
                            "07-06周二",
                            "07-07周三"
                        ]
                    },
                    yAxis: {},
                    series: [
                        {
                            name: "用户数",
                            type: "line",
                            data: [50, 122, 363, 347, 1000, 400, 233]
                        }
                    ]
                });
            }
        }
    };
</script>
<style lang="less" scoped>
    .visit {
        display: flex;
        width: 100%;
        min-width: 1000px;
        margin-top: 20px;
        height: 300px;

        padding: 10px;
        box-sizing: border-box;
        .rightbox {
            margin-top: 50px;
            width: 300px;
            height: 200px;
            display: flex;
            flex-wrap: wrap;
            //    border:1px solid red;
            flex-shrink: 0;
            .box {
                width: 120px;
                height: 80px;
                border: 1px solid #666666;
                text-align: center;
                padding: 10px;
                line-height: 30px;
                box-sizing: border-box;

                margin: 10px;
            }
        }
    }

    .user {
        margin-bottom: 20px;
        .title {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
            margin-left: 20px;
        }
        .listBox {
            width: 100%;
            border: 1px solid #ccc;
            margin-left: 20px;
            margin-top: 20px;
            padding: 20px;
            box-sizing: border-box;
        }
        .formBox {
            width: 100%;
            height: 200px;
            border: 1px solid #ccc;
            margin-left: 20px;
            margin-top: 20px;
            padding: 20px;
            box-sizing: border-box;
            .itemBox {
                display: flex;
                justify-content: space-between;
                text-align: center;
                line-height: 50px;
                div {
                    padding: 30px;
                    > p:nth-child(1) {
                        font-size: 24px;
                        color: red;
                    }
                }
            }
        }
    }
</style>
