var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},PageBase=function(e){function t(){var t=e.call(this)||this;return t.SCREEN=0,t._speedOffset=1,t._lastTime=0,t._isSpeedOffsetOpen=!0,t}return __extends(t,e),t.prototype.inScene=function(){},t.prototype.outScene=function(){},t.prototype.resize=function(e){},t.prototype.onEnterFrame=function(e){},t.prototype.setKey=function(e){this._key=e},t.prototype.getKey=function(){return this._key},t.prototype.inComplete=function(){GEvent.g().addEventListener(egret.Event.RESIZE,this.resize,this),this.dispatchEvent(new egret.Event("inComplete"))},t.prototype.outComplete=function(){GEvent.g().removeEventListener(egret.Event.RESIZE,this.resize,this),this.dispatchEvent(new egret.Event("outComplete"))},t}(egret.DisplayObjectContainer);__reflect(PageBase.prototype,"PageBase",["IPageBase"]);var ResVC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getVirtualUrl=function(e){return e+"?v="+window.version},t}(RES.VersionController);__reflect(ResVC.prototype,"ResVC");var Main=function(e){function t(){var t=e.call(this)||this;return egret.ImageLoader.crossOrigin="anonymous",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),GameCongfig.mainUser.openid=GU.GetQueryString("openid"),GConfig.init(640,1e3),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},t.prototype.onResourceLoadComplete=function(e){"loading"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),Gweixin.g().ready(),this.createGameScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.createGameScene=function(){function e(e){var t=e.itemsLoaded/e.itemsTotal;n.update(t)}function t(i){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,t,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,e,this),GEvent.g().once(GEvent.LOADING_COMPLETE,function(){GInterface.g().init(),GC.g().to("start")},this),n.isLoadComplete=!0,n.complete()}GC.g().init([{KEY:"start",CLASS:Start,GROUP_ASSETS:"main"},{KEY:"reel",CLASS:Reel,GROUP_ASSETS:"main"},{KEY:"home",CLASS:Home,GROUP_ASSETS:"main"},{KEY:"end",CLASS:End,GROUP_ASSETS:"main"}]);var i=GR.createShape();i.graphics.beginFill(0),i.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),i.graphics.endFill(),this.stage.addChild(i),GC.g().background=i,GC.g().background.alpha=0;var n=new LoadingUI;this.stage.addChild(n),TrackCode.loading(),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e,this),RES.loadGroup("main")},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var GSound=function(){function e(){this._allSoundKeys={},this.isStop=!1}return e.g=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.play=function(e,t,i,n){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),!this.isStop){if(!RES.getRes(e))return void RES.getResAsync(e,function(a){var s=this._allSoundKeys[e]=a.play(t,i);s.volume=n},this);var a=this._allSoundKeys[e]=RES.getRes(e).play(t,i);a.volume=n}},e.prototype.stopAllSound=function(){for(var e in this._allSoundKeys)this._allSoundKeys[e].stop()},e.prototype.pause=function(e){this._allSoundKeys[e]&&this._allSoundKeys[e].stop()},e}();__reflect(GSound.prototype,"GSound");var GU=function(){function e(){}return e.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return null!=i?i[2]:null},e.getAngleVector=function(e){return{x:Math.cos(e),y:Math.sin(e)}},e.getRandom=function(e,t){return Math.round(e+Math.random()*(t-e))},e.getRandomFloa=function(e,t){return e+Math.random()*(t-e)},e.getRandomObj=function(e,t){return new RandomObject(e,t)},e.getPointDistance=function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},e.getPointAngle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},e.getRadians=function(e){return e*(180/Math.PI)},e.getAngle=function(e){return e*(Math.PI/180)},e.hitTest=function(e,t){var i=e.getBounds(),n=t.getBounds();return i.x=e.x,i.y=e.y,n.x=t.x,n.y=t.y,i.intersects(n)},e.getRGB=function(e){return[e>>16,e>>8&255,255&e]},e.get0xFF=function(e,t,i){return e<<16|t<<8|i},e.getHSB=function(e,t,i){var n=Math.max(e,t,i),a=Math.min(e,t,i),s=n/255,o=0,r=0!=n?(n-a)/n:0;if(0!=r){var h=(n-e)/(n-a),c=(n-t)/(n-a),l=(n-i)/(n-a);o=e==n?l-c:t==n?2+h-l:4+c-h,o/=6,0>o&&(o+=1)}return[s,r,o]},e.createTimer=function(e,t){var i={m:0,target:t.target};return TweenMax.to(i,e,{m:60*e,onUpdate:function(){t.onUpdate&&(i.millisecond=t.down?60*e-i.m:i.m,i.second=Math.floor(i.millisecond/60),i.mill=Math.floor(i.millisecond%60),i.milltext=i.mill>9?i.mill.toString():"0"+i.mill.toString(),i.secondtext=i.second>9?i.second.toString():"0"+i.second.toString(),t.onUpdate(i))},onComplete:function(){t.onComplete(i)},ease:Linear.easeNone})},e.textureToBase64=function(e){var t=e.bitmapData,i=document.createElement("canvas");i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0,t.width,t.height);var n=i.toDataURL("image/png");return n},e}();__reflect(GU.prototype,"GU");var RandomObject=function(){function e(e,t){this.orderArr=[],this.min=0,this.max=0,this.min=e,this.max=t,this.init()}return e.prototype.getNoRepeat=function(){var e=this.orderArr.length;0==e&&this.init();var t=Math.floor(Math.random()*e);return this.orderArr.splice(t,1)[0]},e.prototype.init=function(){this.orderArr=[];for(var e=0,t=this.max-this.min+1;t>e;e++)this.orderArr[e]=this.min+e},e}();__reflect(RandomObject.prototype,"RandomObject");var KBitmap=function(e){function t(){var t=e.call(this)||this;return t.ix=0,t.iy=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t.prototype.getResAsync=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),RES.getResAsync(e,function(e){this.bitmapData=e,e&&(this.anchorOffsetX=e._bitmapWidth*t,this.anchorOffsetY=e._bitmapHeight*i)},this)},t.prototype.getResByUrl=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),RES.getResByUrl(e,function(e){this.bitmapData=e,e&&(this.anchorOffsetX=e._bitmapWidth*t,this.anchorOffsetY=e._bitmapHeight*i)},this)},t}(egret.Bitmap);__reflect(KBitmap.prototype,"KBitmap");var KBitmapText=function(e){function t(){var t=e.call(this)||this;return t.ix=0,t.iy=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t}(egret.BitmapText);__reflect(KBitmapText.prototype,"KBitmapText");var KButton=function(e){function t(){var t=e.call(this)||this;return t.ix=0,t.iy=0,t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBegin,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t.prototype.touchBegin=function(e){this.iy||(this.iy=this.y),this.y+=5,this.alpha=.8,GSound.g().play("button",0,1,1),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},t.prototype.touchEnd=function(e){this.y=this.iy,this.alpha=1,this.stage.hasEventListener(egret.TouchEvent.TOUCH_END)&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.hitTestPoint(e.stageX,e.stageY)&&this.dispatchEvent(new KEvent(t.TOUCH_END))},t}(egret.Bitmap);KButton.TOUCH_END="touch_end",__reflect(KButton.prototype,"KButton");var KMovieClip=function(e){function t(t,i){var n=e.call(this,new egret.MovieClipDataFactory(t,i).generateMovieClipData())||this;return n.ix=0,n.iy=0,n}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t}(egret.MovieClip);__reflect(KMovieClip.prototype,"KMovieClip");var KShape=function(e){function t(){var t=e.call(this)||this;return t.ix=0,t.iy=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t}(egret.Shape);__reflect(KShape.prototype,"KShape");var KTextField=function(e){function t(){var t=e.call(this)||this;return t.ix=0,t.iy=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"sx",{get:function(){return this.ix},set:function(e){this.x=this.ix=e*GConfig.sceneWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this.iy},set:function(e){this.y=this.iy=e*GConfig.sceneHeight},enumerable:!0,configurable:!0}),t}(egret.TextField);__reflect(KTextField.prototype,"KTextField");var GEvent=function(e){function t(){var t=e.call(this)||this;return t._EVT_DIC={},t}return __extends(t,e),t.g=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.triggerEvent=function(e,t){void 0===t&&(t=null),this._EVT_DIC[e]?this._evt=this._EVT_DIC[e]:this._evt=this._EVT_DIC[e]=new KEvent(e),this._evt.data=t,this.dispatchEvent(this._evt)},t}(egret.EventDispatcher);GEvent.ENTER_FRAME="enter_frame",GEvent.LOADING_COMPLETE="loading_complete",GEvent.SCREEN_CHANGE="screen_change",GEvent.ON_DEVICE_ORIENTATION="on_device_orientation",GEvent.ON_SHAKE="on_shake",__reflect(GEvent.prototype,"GEvent");var KEvent=function(e){function t(t,i,n,a){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===a&&(a=null);var s=e.call(this,t,i,n)||this;return s.data=a,s}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t}(egret.Event);__reflect(KEvent.prototype,"KEvent");var GC=function(){function e(){this.currentPageID="",this.autoNewToCurrent=!0}return e.g=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.init=function(e){function t(){document.getElementById("lockPrompt")&&(document.getElementById("lockPrompt").style.display=window.innerHeight<window.innerWidth?"block":"none"),GEvent.g().triggerEvent(egret.Event.RESIZE)}this._pageKeyList=e,egret.MainContext.instance.stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),t(),window.onresize=t},e.prototype.onEnterFrame=function(e){GEvent.g().triggerEvent(GEvent.ENTER_FRAME,e)},e.prototype.newToCurrentPage=function(){this._currentPage=this._newPage,this._newPage=null},e.prototype.to=function(e){if(this._goKey=e,!this._currentPage||this._currentPage.getKey()!=e){this.currentPageID=e;for(var t=0;this._pageKeyList.length>t;t++){var i=this._pageKeyList[t];if(i.KEY==e){(0==RES.getGroupByName(i.GROUP_ASSETS).length||RES.isGroupLoaded(i.GROUP_ASSETS))&&this.execution();break}}}},e.prototype.sceneInComplete=function(e){e.target.removeEventListener("inComplete",this.sceneInComplete,this),this.autoNewToCurrent&&this.newToCurrentPage()},e.prototype.sceneOutComplete=function(e){e.target.removeEventListener("outComplete",this.sceneInComplete,this),e.target.removeChildren(),e.target.parent.removeChild(e.target)},e.prototype.execution=function(){for(var e=0;this._pageKeyList.length>e;e++){var t=this._pageKeyList[e];if(this._goKey==t.KEY){this._currentPage&&(this._currentPage.addEventListener("outComplete",this.sceneOutComplete,this),this._currentPage.outScene()),this._newPage=new t.CLASS,this._newPage.setKey(this._goKey),egret.MainContext.instance.stage.addChild(this._newPage),this._newPage.addEventListener("inComplete",this.sceneInComplete,this),this._newPage.inScene();break}}},e}();__reflect(GC.prototype,"GC");var GR=function(){function e(){}return e.getCacheDisplay=function(e,t){var i;return this.AllCacheDisplays[e]?i=this.AllCacheDisplays[e]:(i=this.AllCacheDisplays[e]=new CacheDisplay,i.init(t)),i},e.cacheDisplay=function(e,t,i){var n=null;if(0!=i&&(n=this.getCacheDisplay(e,i),!n.needNew()))return n.getDisplay();var a=new t;return n&&n.setDisplay(a),a},e.createBitmap=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=0);var a=null;if(0!=n&&(a=this.getCacheDisplay(e,n),!a.needNew()))return a.getDisplay();var s=new KBitmap,o=RES.getRes(e);return o?(s.texture=o,s.anchorOffsetX=s.getBounds().width*t,s.anchorOffsetY=s.getBounds().height*t):s.getResAsync(e,t,t),i?s.scale9Grid=i:s.cacheAsBitmap=!0,a&&a.setDisplay(s),s},e.createMovieClip=function(e,t,i,n){void 0===t&&(t=30),void 0===i&&(i=0),void 0===n&&(n=0);var a=null;if(0!=n&&(a=this.getCacheDisplay(e,n),!a.needNew()))return a.getDisplay();var s=RES.getRes(e+"_json"),o=RES.getRes(e+"_png"),r=new KMovieClip(s,o);return r.anchorOffsetX=r.getBounds().width*i,r.anchorOffsetY=r.getBounds().height*i,a&&a.setDisplay(r),r},e.createTextField=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=0);var n=null;if(0!=i&&(n=this.getCacheDisplay(e,i),!n.needNew()))return n.getDisplay();var a=new KTextField;return a.textColor=t,n&&n.setDisplay(a),a},e.createBitmapText=function(e,t){void 0===t&&(t=0);var i=null;if(0!=t&&(i=this.getCacheDisplay(e,t),!i.needNew()))return i.getDisplay();var n=new KBitmapText;return n.font=RES.getRes(e),i&&i.setDisplay(n),n},e.createShape=function(e,t){void 0===e&&(e=""),void 0===t&&(t=0);var i=null;if(0!=t&&(i=this.getCacheDisplay(e,t),!i.needNew()))return i.getDisplay();var n=new KShape;return i&&i.setDisplay(n),n},e.createButtonBitmap=function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=0);var a=null;if(0!=n&&(a=this.getCacheDisplay(e,n),!a.needNew()))return a.getDisplay();var s=new KButton;return s.texture=RES.getRes(e),s.anchorOffsetX=s.getBounds().width*t,s.anchorOffsetY=s.getBounds().height*t,i?s.scale9Grid=i:s.cacheAsBitmap=!0,a&&a.setDisplay(s),s},e.createContainer=function(){return new egret.DisplayObjectContainer},e}();GR.AllCacheDisplays={},__reflect(GR.prototype,"GR");var CacheDisplay=function(){function e(){this._max=0,this._index=0,this._pool=[]}return e.prototype.init=function(e){this._max=e,this._index=this._max,this._pool=[]},e.prototype.needNew=function(){return this._pool.length<this._max},e.prototype.setDisplay=function(e){this._pool.push(e)},e.prototype.getDisplay=function(){this._index++,this._index>=this._max&&(this._index=0);var e=this._pool[this._index];return e.visible=!0,e.scaleY=e.scaleX=e.alpha=1,e.x=e.y=e.rotation=0,e},e}();__reflect(CacheDisplay.prototype,"CacheDisplay");var GConfig=function(){function e(){}return e.init=function(e,t){this.sceneWidth=e,this.sceneHeight=t,this.cpX=.5*e,this.cpY=.5*t,"localhost:8888"!=window.location.host&&"192.168.31.229:8888"!=window.location.host&&(this.assetsPrifix="public/",this.isTest=!1),window.isIOS&&(this.isPhone=!0)},e}();GConfig.sceneWidth=640,GConfig.sceneHeight=1e3,GConfig.cpX=320,GConfig.cpY=500,GConfig.isTest=!0,GConfig.isPhone=!1,GConfig.assetsPrifix="",__reflect(GConfig.prototype,"GConfig");var GameCongfig=function(){function e(){}return e}();GameCongfig.isOnce=!0,GameCongfig.gamePullDist=270,GameCongfig.gameGold=10,GameCongfig.gold=0,GameCongfig.toDayMax=!1,GameCongfig.comeBackOpenId="",GameCongfig.mainUser={id:0,name:"",largeUrl:"",openid:""},__reflect(GameCongfig.prototype,"GameCongfig");var Gweixin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shareData={title:"梦幻乐园奇遇记",desc:"天上居然掉梦幻童话乐园的门票啦！你还愣着？！一块来抢！",link:"http://"+window.location.host+"/disney/index.html?openid="+GameCongfig.mainUser.openid,imgUrl:location.origin+"/disney/public/resource/wx.jpg"},t._sAppMessage=new BodyMenuShareAppMessage,t._sQQ=new BodyMenuShareQQ,t._sTimeline=new BodyMenuShareTimeline,t._sWeibo=new BodyMenuShareWeibo,t}return __extends(t,e),t.g=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.ready=function(){wx.ready(function(){t.g().synShareData(!1)})},t.prototype.synShareData=function(e){e?this.shareData.desc="已get"+e+"张梦幻童话乐园门票！还有更多梦幻好礼等你来抢！":this.shareData.desc="天上居然掉梦幻童话乐园的门票啦！你还愣着？！一块来抢！",this._sAppMessage.cancel=t.g().appMessageCancel,this._sAppMessage.success=t.g().appMessageSuccess,this._sTimeline.cancel=t.g().timelineCancel,this._sTimeline.success=t.g().timelineSuccess,this._sAppMessage.title=this.shareData.title,this._sAppMessage.desc=this.shareData.desc,this._sAppMessage.imgUrl=this.shareData.imgUrl,this._sAppMessage.link=this.shareData.link,this._sQQ.title=this.shareData.title,this._sQQ.desc=this.shareData.desc,this._sQQ.imgUrl=this.shareData.imgUrl,this._sQQ.link=this.shareData.link,this._sTimeline.title=this.shareData.desc,this._sTimeline.imgUrl=this.shareData.imgUrl,this._sTimeline.link=this.shareData.link,wx.onMenuShareTimeline(this._sTimeline),wx.onMenuShareAppMessage(this._sAppMessage),wx.onMenuShareQQ(this._sQQ),wx.onMenuShareWeibo(this._sWeibo)},t.prototype.hideOptionMenu=function(){wx&&wx.hideOptionMenu({})},t.prototype.showOptionMenu=function(){wx&&wx.showOptionMenu({})},t.prototype.appMessageCancel=function(){t.g().dispatchEvent(new egret.Event(t.SHARE_CANCEL))},t.prototype.appMessageSuccess=function(){WebService.g().doShare(),TrackCode.shareFriends(),t.g().dispatchEvent(new egret.Event(t.SHARE_SUCCESS))},t.prototype.timelineCancel=function(){t.g().dispatchEvent(new egret.Event(t.SHARE_CANCEL))},t.prototype.timelineSuccess=function(){WebService.g().doShare(),TrackCode.shareMoments(),t.g().dispatchEvent(new egret.Event(t.SHARE_SUCCESS))},t}(egret.EventDispatcher);Gweixin.SHARE_SUCCESS="share_success",Gweixin.SHARE_CANCEL="share_cancel",__reflect(Gweixin.prototype,"Gweixin");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.animationComplete=!1,t.isLoadComplete=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){GSound.g().play("startBg",0,1e4,.3);var e=GR.createShape();e.graphics.beginFill(10809821),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),this.carCor=GR.createContainer(),this.addChild(this.carCor),this.carCor.x=GConfig.cpX,this.carCor.y=GConfig.cpY,this.animationComplete=!0;var t=GR.createBitmap("loadingShadow",.5);this.carCor.addChild(t),t.x=10,t.y=62;var i=GR.createBitmap("loadingCar",.5);this.carCor.addChild(i),TweenMax.to(i,.1,{y:1,ease:Linear.easeNone,repeat:-1,yoyo:!0});var n=GR.createBitmap("loadingTire",.5);this.carCor.addChild(n),n.x=-82,n.y=43,TweenMax.to(n,.2,{rotation:360,ease:Linear.easeNone,repeat:-1});var a=GR.createBitmap("loadingTire",.5);this.carCor.addChild(a),a.x=74,a.y=40,TweenMax.to(a,.2,{rotation:360,ease:Linear.easeNone,repeat:-1});var s=this.loadingTree_0=GR.createBitmap("loadingTree_0");this.addChild(s),s.y=550,TweenMax.to(s,1.2,{x:700,ease:Linear.easeNone,repeat:-1});var o=this.loadingTree_1=GR.createBitmap("loadingTree_1");this.addChild(o),o.y=600,TweenMax.to(o,1.2,{x:700,ease:Linear.easeNone,repeat:-1});var r=this.loadingTree_2=GR.createBitmap("loadingTree_1");this.addChildAt(r,0),r.y=450;var h=this.loadingTree_3=GR.createBitmap("loadingTree_0");this.addChildAt(h,0),h.y=410,TweenMax.to(h,1.4,{x:700,ease:Linear.easeNone,repeat:-1}),TweenMax.to(r,1.4,{x:700,ease:Linear.easeNone,repeat:-1})},t.prototype.update=function(e){},t.prototype.complete=function(){if(this.isLoadComplete&&this.animationComplete){var e=this;TweenMax.to(this,.6,{alpha:0}),TweenMax.to(this.carCor,.6,{x:-200,ease:Linear.easeNone,onComplete:function(){GSound.g().pause("loading"),e.removeChildren(),e.stage.removeChild(e),GEvent.g().triggerEvent(GEvent.LOADING_COMPLETE)}})}},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var GScroller=function(e){function t(i){void 0===i&&(i=0);var n=e.call(this)||this;return n.EDGE_MAX=150,n.DRAG_TOP=!0,n.DRAG_BOTTOM=!0,n.PASS_RATE=.95,n._touchBeginPoint=new egret.Point,n._paddling=new egret.Point,n._paddlingCopy=new egret.Point,n._returnSpeed=.2,n._friction=.95,n._minPaddling=4,n._edgePer=0,n._scrollEvt=new KEvent(t.SCROLL_DATA),n._topEdgeEvt=new KEvent(t.SCROLL_TOP_EDGE),n._bottomEdgeEvt=new KEvent(t.SCROLL_BOTTOM_EDGE),n.SCROLL_MAX_HEIGHT=i>GConfig.sceneHeight?i:GConfig.sceneHeight,n.init(egret.MainContext.instance.stage),n}return __extends(t,e),t.g=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.start=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!0),i&&(this._scrollData={x:t,y:e,paddling:0,topPer:0,bottomPer:0,isDrag:!1},this._edgeEvtObj={data:0,pass:!1}),this._edgePer=0,this._view.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageTouchBegin,this)},t.prototype.stop=function(){this._view.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageTouchBegin,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMove,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEnd,this),this.removeAllThisEnterFrame()},t.prototype.init=function(e){this._view=e},t.prototype.stageTouchBegin=function(e){this._touchPointID=e.touchPointID,this._touchBeginPoint.x=e.stageX,this._touchBeginPoint.y=e.stageY,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMove,this),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEnd,this),this.removeAllThisEnterFrame()},t.prototype.removeAllThisEnterFrame=function(){GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onBottomEnterFrame,this),GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onTopEnterFrame,this),GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.stageTouchMove=function(e){this._touchPointID==e.touchPointID&&(this._paddling.y=e.stageY-this._touchBeginPoint.y,this._touchBeginPoint.y=e.stageY,this._scrollData.isDrag=!0,this.DRAG_TOP&&this._scrollData.y>0?(this._edgePer=this._scrollData.y/this.EDGE_MAX,this._paddling.y*=1-this._edgePer,this._edgeEvtObj.data=this._edgePer,this.triggerTopEdgeEvt(this._edgeEvtObj)):this.DRAG_BOTTOM&&Math.abs(this._scrollData.y)>this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth&&(this._edgePer=-(this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth+this._scrollData.y)/this.EDGE_MAX,this._paddling.y*=1-this._edgePer,this._edgeEvtObj.data=this._edgePer,this.triggerBottomEdgeEvt(this._edgeEvtObj)),this._scrollData.y+=this._paddling.y,this._scrollData.paddling=this._paddling.y,0==this.DRAG_TOP&&this._scrollData.y>0&&this._paddling.y>0?this._scrollData.y=0:0==this.DRAG_BOTTOM&&Math.abs(this._scrollData.y)>this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth&&this._paddling.y<0&&(this._scrollData.y=-(this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth)),this.SCROLL_MAX_HEIGHT>=Math.abs(this._scrollData.y)&&this.triggerEvent(this._scrollData))},t.prototype.stageTouchEnd=function(e){this.removeAllThisEnterFrame(),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMove,this),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEnd,this),this._scrollData.isDrag=!1,this.DRAG_TOP&&this._scrollData.y>0?GEvent.g().addEventListener(GEvent.ENTER_FRAME,this.onTopEnterFrame,this):this.DRAG_BOTTOM&&Math.abs(this._scrollData.y)>this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth?GEvent.g().addEventListener(GEvent.ENTER_FRAME,this.onBottomEnterFrame,this):this._minPaddling<Math.abs(this._paddling.y)&&(this._paddling.y*=.9,this._paddlingCopy.y=this._paddling.y,GEvent.g().addEventListener(GEvent.ENTER_FRAME,this.onEnterFrame,this)),this.triggerTopEdgeEvt({data:0,pass:!1}),this.triggerBottomEdgeEvt({data:0,pass:!1})},t.prototype.onTopEnterFrame=function(e){this._edgeEvtObj.pass=this._edgePer>this.PASS_RATE,this._scrollData.y+=(0-this._scrollData.y)*this._returnSpeed,this._edgePer=this._scrollData.y/this.EDGE_MAX,0==Math.round(this._scrollData.y)&&(this._edgePer=0,GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onTopEnterFrame,this)),this._edgeEvtObj.data=this._edgePer,this.triggerTopEdgeEvt(this._edgeEvtObj),this.triggerEvent(this._scrollData)},t.prototype.onBottomEnterFrame=function(e){this._edgeEvtObj.pass=this._edgePer>this.PASS_RATE;var t=this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth;this._scrollData.y+=(-t-this._scrollData.y)*this._returnSpeed,this._edgePer=-(t+this._scrollData.y)/this.EDGE_MAX,Math.round(this._scrollData.y)==-t&&(this._scrollData.y=-t,this._edgePer=0,GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onBottomEnterFrame,this)),this._edgeEvtObj.data=this._edgePer,this.triggerBottomEdgeEvt(this._edgeEvtObj),this.triggerEvent(this._scrollData)},t.prototype.onEnterFrame=function(e){this._scrollData.isDrag=!1,(this._scrollData.y>0||Math.abs(this._scrollData.y)>this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth)&&(this._paddling.y*=.5),this._paddling.y*=this._friction,this._scrollData.y+=this._paddling.y,this._scrollData.paddling=this._paddling.y,!this.DRAG_TOP&&this._scrollData.y>0?this._scrollData.y=0:!this.DRAG_BOTTOM&&Math.abs(this._scrollData.y)>this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth&&(this._scrollData.y=-(this.SCROLL_MAX_HEIGHT-GConfig.sceneWidth)),this.triggerEvent(this._scrollData),Math.abs(this._paddling.y)<=.1&&(GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onEnterFrame,this),this.stageTouchEnd(null))},t.prototype.triggerEvent=function(e){this._scrollEvt.data=e,this.dispatchEvent(this._scrollEvt)},t.prototype.triggerTopEdgeEvt=function(e){this._topEdgeEvt.data=e,this.dispatchEvent(this._topEdgeEvt)},t.prototype.triggerBottomEdgeEvt=function(e){this._bottomEdgeEvt.data=e,this.dispatchEvent(this._bottomEdgeEvt)},t}(egret.EventDispatcher);GScroller.SCROLL_DATA="scroll_data",GScroller.SCROLL_TOP_EDGE="scroll_top_edge",GScroller.SCROLL_BOTTOM_EDGE="scroll_bottom_edge",GScroller.SCROLL_UP="scroll_up",__reflect(GScroller.prototype,"GScroller");var TrackCode=function(){function e(){}return e.track=function(t,i,n){void 0===n&&(n=""),e.ga||(e.ga=window.ga),e.ga&&e.ga("send","event",t,i,n)},e.shareFriends=function(){e.track("Share","Share","share_friends")},e.shareMoments=function(){e.track("Share","Share","share_moments")},e.loading=function(){e.track("Loading","Loading","entry")},e.start=function(){e.track("Start","Start","entry")},e.startHide=function(){e.track("Start","startHide","entry")},e.reel=function(){e.track("Reel","Reel","entry")},e.game=function(){e.track("Game","Game","entry")},e.shareClick=function(){e.track("Share","Share-Click","Share-Click")},e.getGoldClick=function(){e.track("End","End-getGold-Click","End-getGold-Click")},e.oncePlayGame=function(){e.track("End","End-Once-Click","End-Once-Click")},e}();__reflect(TrackCode.prototype,"TrackCode");var End=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.inScene=function(){GSound.g().play("pass",0,1,1),GSound.g().play("endBg",0,1e4,.6),Gweixin.g().synShareData(GameCongfig.gameGold),this.createView(),this.inComplete()},t.prototype.outScene=function(){GSound.g().pause("endBg"),Gweixin.g().synShareData(!1),this.outComplete()},t.prototype.resize=function(e){},t.prototype.createView=function(){var e=GR.createBitmap("endBox_1",.5,null,1);this.addChild(e),e.x=GConfig.cpX-2,e.y=405,this.conetent=new egret.DisplayObjectContainer,this.addChild(this.conetent);var t=GR.createBitmap("b_2");this.addChild(t),t.scaleX=-1,t.anchorOffsetY=t.height,t.x=150,t.y=720,TweenMax.to(t,1,{rotation:2,ease:Linear.easeNone,repeat:-1,yoyo:!0});var i=GR.createBitmap("b_3");this.addChild(i),i.x=470,i.y=100,TweenMax.to(i,.8,{rotation:-2,ease:Linear.easeNone,repeat:-1,yoyo:!0});var n=GR.createBitmap("endBox_0",.5,null,1);this.addChild(n),n.x=GConfig.cpX,n.y=400,this.conetent.y=200;var a=GR.createBitmap("ticket",.5);this.conetent.addChild(a),a.x=GConfig.cpX,a.y=a.iy=100;var s=GR.createBitmap("x",.5,null,1);this.conetent.addChild(s),s.x=GConfig.cpX,s.y=s.iy=220;var o=GR.createBitmapText("numbers_fnt");this.conetent.addChild(o),o.text="0",o.scaleX=o.scaleY=1.5,o.anchorOffsetX=.5*o.width,o.anchorOffsetY=.5*o.height,o.x=GConfig.cpX,o.y=o.iy=300;var r=GR.createBitmap(GameCongfig.toDayMax?"goldCoinMax":"goldCoin",.5,null,1);this.conetent.addChild(r),r.alpha=0,r.x=320,r.y=500;var h=GR.createBitmapText("goldFont_fnt");this.conetent.addChild(h),h.text="0",h.scaleX=h.scaleY=1,h.anchorOffsetX=.5*h.width,h.anchorOffsetY=.5*h.height,h.x=GConfig.cpX-10,h.y=h.iy=645,h.alpha=0,h.visible=0==GameCongfig.toDayMax;var c=GR.createButtonBitmap("btnOnce",.5);this.addChild(c),c.x=GConfig.cpX-140,c.y=c.iy=820,c.visible=!1;var l=GR.createButtonBitmap("btnGetGold",.5);this.addChild(l),l.x=GConfig.cpX+140,l.y=l.iy=820,l.visible=!1;var d=GR.createButtonBitmap("btnShare",.5);this.addChild(d),d.x=GConfig.cpX-140,d.y=d.iy=935,d.visible=!1;var p=GR.createButtonBitmap("btnFollow",.5);this.addChild(p),p.x=GConfig.cpX+140,p.y=p.iy=935,p.visible=!1,this.y=-500;var g=this;TweenMax.to(this,.6,{y:-10,ease:Back.easeOut});var u={v:0};TweenMax.to(u,.4,{delay:.5,v:GameCongfig.gameGold,onUpdate:function(){o.text=Math.round(u.v).toString(),o.anchorOffsetX=.5*o.width,o.anchorOffsetY=.5*o.height}}),TweenMax.delayedCall(0==GameCongfig.gameGold?1:1.2,function(){TweenMax.to(a,.3,{x:250,y:0,scaleX:.5,scaleY:.5}),TweenMax.to(s,.3,{x:340,y:0,scaleX:.8,scaleY:.8}),TweenMax.to(o,.3,{x:395,y:-10,scaleX:1,scaleY:1}),TweenMax.to(r,.3,{alpha:1,y:230}),TweenMax.to(h,.3,{alpha:1,y:370}),TweenMax.delayedCall(.5,function(){0==GameCongfig.toDayMax&&GSound.g().play("gold",0,1,1)});TweenMax.to(u,1.2,{delay:.5,v:GameCongfig.gold,onUpdate:function(){h.text=Math.round(u.v).toString(),h.anchorOffsetX=.5*h.width,h.anchorOffsetY=.5*h.height}}),c.y=c.iy+320,l.y=l.iy+320,d.y=d.iy+320,p.y=p.iy+320,p.visible=d.visible=l.visible=c.visible=!0,TweenMax.to(c,.4,{alpha:1,y:c.iy}),TweenMax.to(l,.4,{delay:.05,alpha:1,y:l.iy}),TweenMax.to(d,.4,{delay:.1,alpha:1,y:d.iy}),TweenMax.to(p,.4,{delay:.15,alpha:1,y:p.iy})}),l.addEventListener(KButton.TOUCH_END,function(){TrackCode.getGoldClick(),location.href=location.origin+"/disney/profile.html?from=game"}),d.addEventListener(KButton.TOUCH_END,function(){TrackCode.shareClick();var e=new ShareBox;g.addChild(e),e.init()}),c.once(KButton.TOUCH_END,function(){TrackCode.oncePlayGame(),GC.g().to("home")}),p.addEventListener(KButton.TOUCH_END,function(){var e=new FollowBox;g.addChild(e),e.init()
})},t}(PageBase);__reflect(End.prototype,"End");var Home=function(e){function t(){var t=e.call(this)||this;return t.touchDownPoint=new egret.Point,t.touchMovePoint=new egret.Point,t.moveDistMax=-1,t.timeTotal=100,t.currentTimeProgress=100,t.addTimeProgress=15,t.removeTimeProgress=.2,t.pullPercentage=0,t.addPercentage=.2,t.removePercentage=.01,t.isUpdateView=!0,t}return __extends(t,e),t.prototype.inScene=function(){GSound.g().play("pass",0,1,1),TrackCode.game(),this.createView(),this.inComplete()},t.prototype.outScene=function(){GSound.g().pause("gameBg"),this.outComplete()},t.prototype.resize=function(e){},t.prototype.createView=function(){var e=GR.createShape();e.graphics.beginFill(10809821),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),this.gameScene=new GameScene,this.addChild(this.gameScene),this.gameScene.init(),this.pTimeBar=new PTimeBar,this.addChild(this.pTimeBar),this.pTimeBar.y=10,this.gameScene.once("startGame",function(){this.gameStart()},this)},t.prototype.gameStart=function(){GameCongfig.gameGold=GameCongfig.gold=0,this.pTimeBar.start(),GEvent.g().addEventListener(GEvent.ENTER_FRAME,this.onEnterFrame,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageTouchBegin,this)},t.prototype.gameOver=function(){GEvent.g().removeEventListener(GEvent.ENTER_FRAME,this.onEnterFrame,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageTouchBegin,this),TweenMax.killAll(),this.showOverBox(),this.gameScene.nextMonster(!0);var e=this;TweenMax.delayedCall(.8,function(){GEvent.g().once("doGamePoint",function(){var e=document.getElementById("background");e.src=document.getElementsByTagName("canvas")[0].toDataURL("image/png"),GC.g().to("end")},e),GameCongfig.gold+=Math.round(8*Math.random())+1,GameCongfig.gold>500&&(GameCongfig.gold=500),WebService.g().doGamePoint(GameCongfig.gold,1)})},t.prototype.timeUpdate=function(e){this.removeTimeProgress=.2*e,this.currentTimeProgress=this.currentTimeProgress-this.removeTimeProgress;var t=this.currentTimeProgress/this.timeTotal;this.pTimeBar.setProgress(t),this.currentTimeProgress<=0&&this.gameOver()},t.prototype.stageTouchBegin=function(e){this.touchDownPoint.x=e.stageX,this.touchDownPoint.y=e.stageY,this.stage.once(egret.TouchEvent.TOUCH_MOVE,this.stageTouchMove,this),this.stage.once(egret.TouchEvent.TOUCH_END,this.stageTouchEnd,this)},t.prototype.stageTouchMove=function(e){this.touchMovePoint.x=this.touchDownPoint.x-e.stageX,this.touchMovePoint.y=this.touchDownPoint.y-e.stageY,this.touchDownPoint.x=e.stageX,this.touchDownPoint.y=e.stageY},t.prototype.stageTouchEnd=function(e){if(this.touchMovePoint.y<this.moveDistMax&&(this.touchMovePoint.x=this.touchMovePoint.y=0,GSound.g().play("hit",0,1,.4),this.pullPercentage+=this.addPercentage),this.gameScene.hero.isReady=!0,this.pullPercentage>=1){this.currentTimeProgress+=this.addTimeProgress,this.currentTimeProgress>this.timeTotal&&(this.currentTimeProgress=this.timeTotal),GameCongfig.gameGold+=1,GameCongfig.gold=5*GameCongfig.gameGold,this.showBubble(),this.pullPercentage=0,this.isUpdateView=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.stageTouchBegin,this),this.gameScene.currentMonster.setStatus(2),this.gameScene.nextMonster(!1);var t=this;TweenMax.delayedCall(.5,function(){t.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.stageTouchBegin,t),t.isUpdateView=!0})}},t.prototype.onEnterFrame=function(e){if(this._isSpeedOffsetOpen){var t=egret.getTimer(),i=1e3/(t-this._lastTime);if(this._lastTime=t,this._speedOffset=60/i,this._speedOffset>5)return}this.timeUpdate(this._speedOffset),0!=this.isUpdateView&&(this.removePercentage=.01*this._speedOffset,this.pullPercentage>0?this.pullPercentage-=this.removePercentage:this.pullPercentage>1&&(this.pullPercentage=1),this.pullPercentage<.2&&this.gameScene.currentMonster.setStatus(0),this.pullPercentage>=.2&&this.pullPercentage<=.8&&this.gameScene.currentMonster.setStatus(1),this.pullPercentage>.8&&this.gameScene.currentMonster.setStatus(2),this.gameScene.hero.update(this.pullPercentage),this.gameScene.currentMonster.update(this.pullPercentage))},t.prototype.showOverBox=function(){GSound.g().play("timeup",0,1,.3);var e=GR.createShape();e.graphics.beginFill(0),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),e.alpha=0;var t=GR.createBitmap("endTitle",.5,null,1);this.addChild(t),t.x=GConfig.cpX,t.y=400,t.alpha=0;var i=GR.createBitmap("endClock",.5,null,1);this.addChild(i),i.x=GConfig.cpX,i.y=650,i.rotation=5,i.alpha=0,TweenMax.killTweensOf(i),TweenMax.to(i,.1,{rotation:-5,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(e,.3,{alpha:.6}),TweenMax.to(t,.4,{alpha:1,y:350}),TweenMax.to(i,.4,{alpha:1,y:550})},t.prototype.showBubble=function(){if(!this.bubbleCor){this.bubbleCor=GR.createContainer(),this.addChild(this.bubbleCor);var e=GR.createBitmap("bubble",1,null,1);this.bubbleCor.addChild(e),e.scaleX=e.scaleY=.9;var t=this.gameNumbers=GR.createBitmapText("gameNumbers_fnt");this.bubbleCor.addChild(t),t.text="10",t.scaleX=t.scaleY=1,t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height,t.x=.48*-e.width,t.y=.5*-e.height}this.bubbleCor.x=200,this.bubbleCor.y=720,this.gameNumbers.text=GameCongfig.gameGold.toString(),this.gameNumbers.anchorOffsetX=.5*this.gameNumbers.width,this.gameNumbers.anchorOffsetY=.5*this.gameNumbers.height,this.bubbleCor.alpha=0,this.bubbleCor.scaleX=this.bubbleCor.scaleY=0,TweenMax.killTweensOf(this.bubbleCor),TweenMax.to(this.bubbleCor,.2,{scaleX:1,scaleY:1,alpha:1,ease:Back.easeOut}),TweenMax.to(this.bubbleCor,.2,{delay:.4,scaleX:0,scaleY:0,alpha:0})},t}(PageBase);__reflect(Home.prototype,"Home");var CoconutTree=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=GR.createBitmap("coconutTree_0");this.addChild(e);var t=GR.createBitmap("coconutTree_1",.5);this.addChild(t),t.x=140,t.y=80,TweenMax.to(t,1,{rotation:Math.round(3*Math.random()+3),ease:Linear.easeNone,repeat:-1,yoyo:!0})},t}(egret.DisplayObjectContainer);__reflect(CoconutTree.prototype,"CoconutTree");var FollowBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.touchChildren=this.touchEnabled=!0;var e=GR.createShape();e.graphics.beginFill(1843532),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),e.alpha=.3;var t=GR.createBitmap("wxBox",.5);this.addChild(t),t.x=GConfig.cpX,t.y=GConfig.cpY,t.scaleX=t.scaleY=.6;var i=document.getElementById("wxQR");TweenMax.to(i,0,{alpha:0});var n=this;TweenMax.to(e,.3,{alpha:.85}),TweenMax.to(t,.4,{delay:.1,scaleX:1,scaleY:1,ease:Back.easeOut,onComplete:function(){i&&(i.style.display="block",TweenMax.to(i,.2,{alpha:1})),n.once(egret.TouchEvent.TOUCH_END,function(){i&&(i.style.display="none"),TweenMax.to(n,.2,{alpha:0,onComplete:function(){n.parent.removeChild(n)}})},n)}})},t}(egret.DisplayObjectContainer);__reflect(FollowBox.prototype,"FollowBox");var GameScene=function(e){function t(){var t=e.call(this)||this;return t.scaleTime=.3,t.x=t.anchorOffsetX=GConfig.cpX,t.y=t.anchorOffsetY=GConfig.cpY,t}return __extends(t,e),t.prototype.init=function(){var e=GR.createBitmap("cloud");this.addChild(e),e.x=-400,e.y=130+100*Math.random(),e.scaleX=e.scaleY=1.3,TweenMax.to(e,30,{x:GConfig.sceneWidth+200,ease:Linear.easeNone,repeat:-1});var t=GR.createBitmap("cloud");this.addChild(t),t.x=-200,t.y=230+150*Math.random(),TweenMax.to(t,40,{x:GConfig.sceneWidth+200,ease:Linear.easeNone,repeat:-1});var i=GR.createBitmap("gameSun",0,null,1);this.addChild(i),i.x=30,i.y=i.iy=580;var n=GR.createBitmap("island",0,null,1);this.addChild(n),n.anchorOffsetX=.5*n.width,n.x=GConfig.cpX,n.y=n.iy=480;var a=GR.createMovieClip("groundGrass",20,0,1);this.addChild(a),a.gotoAndPlay(1,-1),a.anchorOffsetX=.5*a.width,a.x=GConfig.cpX,a.y=770;var s=new CoconutTree;this.addChild(s),s.x=-450,s.y=490,TweenMax.to(s,2,{x:GConfig.sceneWidth+250,ease:Linear.easeNone,repeat:-1});var o=new CoconutTree;this.addChild(o),o.x=-450,o.y=490,TweenMax.to(o,2,{delay:1,x:GConfig.sceneWidth+250,ease:Linear.easeNone,repeat:-1});var r=GR.createMovieClip("ground",20,0,1);this.addChild(r),r.gotoAndPlay(1,-1),r.anchorOffsetX=.5*r.width,r.x=GConfig.cpX,r.y=r.iy=820;var h=this.gameView=GR.createContainer();this.addChild(h);var c=GR.createContainer();this.addChild(c),c.x=GConfig.cpX,c.y=c.iy=1020;var l=GR.createBitmap("gameCar",.5,null,1);c.addChild(l),TweenMax.to(l,.1,{y:2,ease:Linear.easeNone,repeat:-1,yoyo:!0});var d=GR.createBitmap("gameTire",.5,null,2);c.addChild(d),d.x=-245,d.y=105,TweenMax.to(d,.2,{rotation:360,ease:Linear.easeNone,repeat:-1});var p=GR.createBitmap("gameTire",.5,null,2);c.addChild(p),p.x=220,p.y=100,TweenMax.to(p,.2,{rotation:360,ease:Linear.easeNone,repeat:-1});var g=GR.createBitmap("lawn");this.addChild(g),g.scaleX=g.scaleY=2,g.y=g.iy=1e3,g.x=-1e3,TweenMax.to(g,.6,{x:GConfig.sceneWidth+600,ease:Linear.easeNone,repeat:-1});var u=GR.createBitmap("lawn");this.addChild(u),u.scaleX=2,u.scaleY=2,u.y=u.iy=1050,u.x=-1e3,TweenMax.to(u,.5,{delay:.4,x:GConfig.sceneWidth+600,ease:Linear.easeNone,repeat:-1}),this._random=GU.getRandomObj(1,3);var y=this.currentMonster=new Monster;h.addChild(y),y.init(this._random.getNoRepeat()),y.x=GConfig.cpX,y.y=350;var f=this.hero=new Hero;h.addChild(f),f.x=GConfig.cpX+10,f.y=910,TweenMax.to(h,1,{x:40,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(c,1,{x:GConfig.cpX+40,ease:Linear.easeNone,repeat:-1,yoyo:!0});var m=this;this.zoomScene=function(){TweenMax.to(this,this.scaleTime,{scaleX:.7,scaleY:.7}),TweenMax.to(r,this.scaleTime,{y:r.iy-25}),TweenMax.to(n,this.scaleTime,{y:n.iy+50}),TweenMax.to(i,this.scaleTime,{y:i.iy+100}),TweenMax.to(c,this.scaleTime,{y:c.iy-60}),TweenMax.to(h,this.scaleTime,{y:170}),TweenMax.delayedCall(m.scaleTime,function(){TweenMax.to(m,m.scaleTime,{scaleX:1,scaleY:1}),TweenMax.to(r,m.scaleTime,{y:r.iy}),TweenMax.to(n,m.scaleTime,{y:n.iy}),TweenMax.to(i,m.scaleTime,{y:i.iy}),TweenMax.to(c,m.scaleTime,{y:c.iy}),TweenMax.to(h,m.scaleTime,{y:0})})},this.showTips=function(){GSound.g().play("tipsBg",0,1e4,.3),f.visible=!1;var e=GR.createMovieClip("tips",10,.5,1);this.addChild(e),e.x=GConfig.cpX+30,e.y=690,e.gotoAndPlay(1,-1),e.scaleX=e.scaleY=1.2,TweenMax.to(this,.6,{scaleX:.7,scaleY:.7}),TweenMax.to(r,.6,{y:r.iy-25}),TweenMax.to(n,.6,{y:n.iy+50}),TweenMax.to(i,.6,{y:i.iy+100}),TweenMax.to(c,.6,{y:c.iy-60}),TweenMax.to(h,.6,{y:160}),TweenMax.to(this.currentMonster,.6,{y:200}),TweenMax.delayedCall(.5,function(){m.stage.once(egret.TouchEvent.TOUCH_END,function(){e.stop(),e.stop(),m.removeChild(e),GSound.g().play("gameBg",0,1e4,.3),GSound.g().pause("tipsBg"),GSound.g().play("pass",0,1,1),f.visible=!0,TweenMax.to(m,m.scaleTime,{scaleX:1,scaleY:1}),TweenMax.to(r,m.scaleTime,{y:r.iy}),TweenMax.to(n,m.scaleTime,{y:n.iy}),TweenMax.to(i,m.scaleTime,{y:i.iy}),TweenMax.to(c,m.scaleTime,{y:c.iy}),TweenMax.to(h,m.scaleTime,{y:0}),TweenMax.to(m.currentMonster,m.scaleTime,{y:350}),m.dispatchEvent(new egret.Event("startGame"))},m)})},this.showTips()},t.prototype.nextMonster=function(e){if(this.currentMonster.over(),this.hero.over(),TweenMax.to(this.currentMonster,this.scaleTime,{x:-500,y:200,onComplete:function(e){e.parent.removeChild(e),e=null},onCompleteParams:[this.currentMonster]}),!e){this.zoomScene();var t=this.currentMonster=new Monster;t.init(this._random.getNoRepeat()),t.x=GConfig.sceneWidth+500,t.y=350,this.gameView.addChildAt(t,0),TweenMax.to(t,this.scaleTime,{x:GConfig.cpX})}},t}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var Hero=function(e){function t(){var t=e.call(this)||this;return t.isReady=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=this.ticket=GR.createBitmap("ticket",1);this.addChild(e),e.anchorOffsetX=.5*e.width,e.y=e.iy=-160,this.ticket.visible=!1;var t=this.hero_hand=GR.createBitmap("hero_2",.5,null,1);this.addChild(t),t.x=0,t.y=-30,t.iy=-230;var i=GR.createBitmap("hero_0",.5,null,1);this.addChild(i);var n=GR.createBitmap("hero_1",.5,null,1);this.addChild(n),n.x=0,n.y=-80,TweenMax.to(n,.1,{y:-83,ease:Linear.easeNone,repeat:-1,yoyo:!0})},t.prototype.over=function(){this.ticket.y=-160,this.ticket.visible=!0,this.ticket.scaleX=this.ticket.scaleY=1;var e=this;TweenMax.to(this.ticket,.4,{scaleX:.7,scaleY:.7,y:-140,onComplete:function(){e.ticket.visible=!1}}),this.isReady=!1,this.hero_hand.y=-30},t.prototype.update=function(e){this.isReady&&(this.hero_hand.y=this.hero_hand.iy+e*GameCongfig.gamePullDist)},t}(egret.DisplayObjectContainer);__reflect(Hero.prototype,"Hero");var Monster=function(e){function t(){var t=e.call(this)||this;return t.currentStatus=0,t}return __extends(t,e),t.prototype.init=function(e){this.assetIndex=e;var t=GR.createBitmap("h"+e+"_0",.5,null,2);this.addChild(t),t.anchorOffsetY=t.height;var i=this.ticket=GR.createBitmap("ticket",.5,null,2);this.addChild(i),i.x=10,i.y=i.iy=130,this.ticket.visible=!0;var n=new egret.DisplayObjectContainer;this.addChild(n),n.mask=new egret.Rectangle(-100,-121,300,700);var a=this.mHand=GR.createBitmap("h"+e+"_2",.5,null,2);n.addChild(a);var s=this.mHared=GR.createBitmap("h"+e+"_1_0",.5,null,2);this.addChild(s),GSound.g().play("m"+this.assetIndex,0,1,.3),1==this.assetIndex&&(t.x=12,t.y=0,n.x=8,a.y=a.iy=-185,s.x=40,s.y=s.iy=-180),2==this.assetIndex&&(t.x=4,t.y=30,s.x=4,s.y=s.iy=-140,n.x=8,n.y=15,a.y=a.iy=-210),3==this.assetIndex&&(t.x=-44,t.y=60,s.x=14,s.y=s.iy=-150,n.x=8,n.y=40,a.y=a.iy=-230),TweenMax.killTweensOf(s),TweenMax.to(s,.1,{y:s.iy-3,ease:Linear.easeNone,repeat:-1,yoyo:!0})},t.prototype.setStatus=function(e){var t=this.mHared.x,i=this.mHared.iy;this.currentStatus!=e&&(this.currentStatus=e,TweenMax.killTweensOf(this.mHared),this.removeChild(this.mHared),this.mHared=null,this.mHared=GR.createBitmap("h"+this.assetIndex+"_1_"+this.currentStatus,.5,null,1),this.addChild(this.mHared),this.mHared.x=t,this.mHared.y=this.mHared.iy=i,TweenMax.killTweensOf(this.mHared),TweenMax.to(this.mHared,.1,{y:this.mHared.iy-3,ease:Linear.easeNone,repeat:-1,yoyo:!0}))},t.prototype.update=function(e){this.mHand.y=this.mHand.iy+e*GameCongfig.gamePullDist,this.ticket.y=this.ticket.iy+e*GameCongfig.gamePullDist},t.prototype.over=function(){this.mHand.y=this.mHand.iy,this.ticket.visible=!1},t}(egret.DisplayObjectContainer);__reflect(Monster.prototype,"Monster");var PTimeBar=function(e){function t(){var t=e.call(this)||this;return t.isBack=!1,t.isWarning=!1,t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=GR.createBitmap("timeBar_3",0,null,1);this.addChild(e),e.x=111,e.y=13,this.progressBar=GR.createContainer(),this.addChild(this.progressBar),this.progressBar.x=110,this.progressBar.y=13,this.progressMask=GR.createBitmap("timeBar_2",0,null,1),this.progressBar.addChild(this.progressMask),this.progressBar.mask=new egret.Rectangle(0,0,506,40);var t=GR.createBitmap("timeBar_0",0,null,1);this.addChild(t),this.timeIcon=GR.createContainer(),this.addChild(this.timeIcon),this.timeIcon.x=60,this.timeIcon.y=25,this.timeIcon.addChild(GR.createBitmap("timeIcon",.5,null,1)),this.timeIconSecond=GR.createBitmap("timeIconSecond",0,null,1),this.timeIcon.addChild(this.timeIconSecond),this.timeIconSecond.anchorOffsetY=14,this.timeIconSecond.anchorOffsetX=2,this.posIcon=GR.createBitmap("timeBar_1",.5,null,1),this.addChild(this.posIcon),this.posIcon.x=this.posIcon.ix=609,this.posIcon.anchorOffsetX=0,this.posIcon.y=34,this.posIcon.visible=!1,this.posIcon.scaleX=this.posIcon.scaleY=1,TweenMax.killTweensOf(this.posIcon),TweenMax.to(this.posIcon,.1,{scaleX:.6,scaleY:.6,ease:Linear.easeNone,repeat:-1})},t.prototype.start=function(){this.posIcon.visible=!0,TweenMax.to(this.timeIconSecond,6,{rotation:360,ease:Linear.easeNone,repeat:-1})},t.prototype.onEnterFrame=function(){},t.prototype.setProgress=function(e){this.progressMask.x=506*(e-1),this.posIcon.x=this.posIcon.ix+504*(e-1),this.isBack=!this.isBack,.3>=e&&0==this.isWarning?(this.isWarning=!0,this.timeIconTween||(this.timeIconTween=TweenMax.to(this.timeIcon,200,{scaleX:1.3,scaleY:1.3,ease:Linear.easeNone,repeat:-1,yoyo:!0})),this.timeIconTween.play()):e>.3&&1==this.isWarning&&(this.isWarning=!1,this.timeIconTween.pause()),0>=e&&(TweenMax.killTweensOf(this.timeIconSecond),TweenMax.killTweensOf(this.timeIcon))},t}(egret.DisplayObjectContainer);__reflect(PTimeBar.prototype,"PTimeBar");var ShareBox=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){GSound.g().play("shareBg",0,1,.6),this.touchChildren=this.touchEnabled=!0;var e=GR.createShape();e.graphics.beginFill(1843532),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),e.alpha=.3;var t=GR.createBitmap("sh_Hand",.5);this.addChild(t),t.anchorOffsetY=t.height,t.x=GConfig.cpX,t.y=GConfig.sceneHeight+t.height,t.iy=GConfig.sceneHeight+50,t.visible=!1;var i=GR.createContainer();this.addChild(i),i.anchorOffsetY=GConfig.sceneHeight,i.anchorOffsetX=i.x=GConfig.cpX,i.y=GConfig.sceneHeight+20;var n=GR.createBitmap("sh_0",0);i.addChild(n),n.anchorOffsetY=1,n.y=n.iy=650,n.x=-80;var a=GR.createBitmap("sh_1",.5);i.addChild(a),a.anchorOffsetY=1,a.y=a.iy=800,a.x=100;var s=GR.createBitmap("sh_2",.5);i.addChild(s),s.anchorOffsetY=1,s.y=s.iy=920,s.x=150;var o=GR.createBitmap("sh_4",1);i.addChild(o),o.anchorOffsetY=1,o.y=o.iy=730,o.x=700;var r=GR.createBitmap("sh_3",.5);i.addChild(r),r.anchorOffsetY=1,r.y=r.iy=890,r.x=450,n.y=n.iy+300,a.y=a.iy+300,s.y=s.iy+300,r.y=r.iy+300,o.y=o.iy+300,n.scaleX=n.scaleY=0,a.scaleX=a.scaleY=0,s.scaleX=s.scaleY=0,r.scaleX=r.scaleY=0,o.scaleX=o.scaleY=0;var h=GR.createBitmap("shareTitle",.5);this.addChild(h),h.x=h.ix=GConfig.cpX,h.y=h.iy=280,h.alpha=0,h.scaleX=0;var c=this;TweenMax.to(e,.3,{alpha:.85}),TweenMax.to(n,.4,{delay:.15,y:n.iy,scaleX:1,scaleY:1,ease:Back.easeOut}),TweenMax.to(a,.4,{delay:.1,y:a.iy,scaleX:1,scaleY:1,ease:Back.easeOut}),TweenMax.to(s,.4,{y:s.iy,scaleX:1,scaleY:1,ease:Back.easeOut}),TweenMax.to(r,.3,{y:r.iy,scaleX:1,scaleY:1}),TweenMax.to(o,.4,{delay:.15,y:o.iy,scaleX:1,scaleY:1,ease:Back.easeOut,onComplete:function(){TweenMax.to(n,.2,{y:n.iy-20,rotation:-4,repeat:1,yoyo:!0,ease:Quad.easeInOut}),TweenMax.to(a,.2,{y:a.iy-20,rotation:-2,repeat:1,yoyo:!0,ease:Quad.easeInOut}),TweenMax.to(o,.2,{y:o.iy-20,rotation:4,repeat:1,yoyo:!0,ease:Quad.easeInOut}),TweenMax.to(s,.2,{y:s.iy-20,repeat:1,yoyo:!0,ease:Quad.easeInOut}),TweenMax.to(r,.2,{y:r.iy-20,repeat:1,yoyo:!0,ease:Quad.easeInOut}),t.visible=!0,TweenMax.to(t,.3,{y:t.iy,ease:Back.easeOut}),TweenMax.to(h,.3,{delay:.2,scaleX:1,alpha:1,ease:Back.easeOut});for(var e=0;4>e;e++){var i=GR.createBitmap("sh_plan_"+(Math.random()<.5?"0":"1"),.5);c.addChild(i),i.x=GConfig.cpX,i.y=200*Math.random()+700;var l=e%2==0?-150:150,d=150*Math.random()+600;TweenMax.to(i,2,{bezier:[{x:i.x+l,y:d},{x:1>l?-300*Math.random():300*Math.random()+600,y:1500,alpha:0}],orientToBezier:!0})}c.once(egret.TouchEvent.TOUCH_END,function(){TweenMax.to(c,.3,{alpha:0,onComplete:function(){c.parent.removeChild(c)}})},c)}})},t}(egret.DisplayObjectContainer);__reflect(ShareBox.prototype,"ShareBox");var Reel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.inScene=function(){GSound.g().play("pass",0,1,1),GSound.g().play("reelBg",0,1,.3),TrackCode.reel(),GC.g().background.alpha=0,TweenMax.to(GC.g().background,1,{alpha:.8});var e=this;TweenMax.delayedCall(.3,function(){e.createView()}),this.inComplete()},t.prototype.outScene=function(){this.outComplete()},t.prototype.resize=function(e){},t.prototype.createView=function(){var e=GR.createContainer();this.addChild(e),e.mask=new egret.Rectangle(0,60,640,900);var t=GR.createBitmap("reelBottom",0);e.addChild(t);var i=GR.createBitmap("reelContent",.5);e.addChild(i),i.x=GConfig.cpX,i.y=450,i.y=i.y-740;var n=GR.createBitmap("reelTop",0);this.addChild(n),t.y=-740;var a=GR.createButtonBitmap("btnStart",.5);this.addChild(a),a.x=GConfig.cpX,a.y=1100,TweenMax.delayedCall(.5,function(){GSound.g().play("titlePage",0,1,.6)}),TweenMax.to(this,.5,{y:500,ease:Back.easeOut}),TweenMax.to(this,.6,{delay:.5,y:0}),TweenMax.to(i,.6,{delay:.5,y:450}),TweenMax.to(t,.6,{delay:.5,y:0}),TweenMax.to(a,.5,{delay:.5,y:920}),a.once(KButton.TOUCH_END,function(){GC.g().to("home")})},t}(PageBase);__reflect(Reel.prototype,"Reel");var Start=function(e){function t(){var t=e.call(this)||this;return t.scaleTime=.5,t.sceneTweens=[],t}return __extends(t,e),t.prototype.inScene=function(){TrackCode.start(),GSound.g().play("pass",0,1,1),this.createView(),this.inComplete()},t.prototype.outScene=function(){this.scene.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBeginHandler,this),GSound.g().pause("startBg"),this.outComplete()},t.prototype.createView=function(){var e=GR.createShape();e.graphics.beginFill(10809821),e.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),e.graphics.endFill(),this.addChild(e),this.scene=new egret.DisplayObjectContainer,this.addChild(this.scene),this.scene.touchChildren=this.scene.touchEnabled=!0,this.scene.x=this.scene.anchorOffsetX=GConfig.cpX,this.scene.y=this.scene.anchorOffsetY=GConfig.cpY;var t=this.sun=GR.createBitmap("sun",.5,null,1);this.scene.addChild(t),this.sceneBottom=new egret.DisplayObjectContainer,this.scene.addChild(this.sceneBottom),this.sceneCenter=new egret.DisplayObjectContainer,this.scene.addChild(this.sceneCenter),this.sceneTop=new egret.DisplayObjectContainer,this.scene.addChild(this.sceneTop);var i=this.title=GR.createBitmap("title",.5);this.addChild(i),i.x=GConfig.cpX;var n=this.btnGo=GR.createButtonBitmap("btnGo",.5,null,1);this.addChild(n),this.sceneLow=new egret.DisplayObjectContainer,this.addChild(this.sceneLow),this.sceneLow.x=this.sceneLow.anchorOffsetX=GConfig.cpX,this.sceneLow.y=this.sceneLow.anchorOffsetY=GConfig.cpY,this.sceneLow.scaleX=this.sceneLow.scaleY=1.5;var a=GR.createBitmap("cloud");this.sceneBottom.addChild(a),a.x=-250,a.y=200+150*Math.random(),TweenMax.to(a,40,{x:890,ease:Linear.easeNone,repeat:-1});var s=GR.createBitmap("cloud");this.sceneBottom.addChild(s),s.x=-250,s.y=100+150*Math.random(),TweenMax.to(s,30,{x:890,ease:Linear.easeNone,repeat:-1});var o=GR.createBitmap("hotAirBalloon",.5,null,1);this.sceneBottom.addChild(o);var r=GR.createBitmap("st_0",1,null,1);this.sceneBottom.addChild(r),r.anchorOffsetX=.5*r.width;var h=GR.createBitmap("st_1",1,null,1);this.sceneBottom.addChild(h),h.anchorOffsetX=.5*h.width;var c=GR.createBitmap("st_2",1,null,1);this.sceneBottom.addChild(c),c.anchorOffsetX=.5*c.width;var l=GR.createBitmap("st_3",1,null,1);this.sceneBottom.addChild(l),l.anchorOffsetX=.5*l.width;var d=GR.createBitmap("mzTa",1,null,1);this.sceneBottom.addChild(d),d.anchorOffsetX=.5*d.width;var p=GR.createBitmap("startBottom",.5,null,1);this.sceneCenter.addChild(p);var g=GR.createBitmap("startCastle");this.sceneCenter.addChild(g),g.anchorOffsetY=GConfig.cpX,g.anchorOffsetX=.5*g.width;var u=new CoconutTree;this.sceneCenter.addChild(u);var y=GR.createBitmap("startTop",.5);this.sceneTop.addChild(y);var f=GR.createBitmap("b_0",1,null,1);this.sceneLow.addChild(f),f.anchorOffsetX=0;var m=GR.createBitmap("b_1",1,null,1);this.sceneLow.addChild(m),m.anchorOffsetX=0;var _=GR.createBitmap("b_2",1,null,1);this.sceneLow.addChild(_);var C=GR.createBitmap("b_4",0,null,1);this.sceneLow.addChild(C);var v=GR.createBitmap("b_3",0,null,1);this.sceneLow.addChild(v),v.anchorOffsetX=v.width;var T=GR.createBitmap("homeCar",0,null,1);this.sceneTop.addChild(T),T.anchorOffsetX=.8*T.width,T.anchorOffsetY=.5*T.height,t.x=GConfig.cpX,t.y=1.3*GConfig.sceneHeight,t.iy=GConfig.cpY+100,TweenMax.to(t,4,{y:GConfig.cpY+100}),p.x=GConfig.cpX,p.y=1.3*GConfig.sceneHeight,TweenMax.to(p,.4,{delay:.1,y:GConfig.sceneHeight-.5*p.height}),g.x=GConfig.cpX,g.y=593,g.scaleX=g.scaleY=0,TweenMax.to(g,.5,{delay:.4,scaleX:1,scaleY:1,ease:Back.easeOut}),r.x=87,r.y=632,r.scaleX=r.scaleY=0,TweenMax.to(r,.5,{delay:.6,scaleX:1,scaleY:1,ease:Back.easeOut}),h.x=166,h.y=608,h.scaleX=h.scaleY=0,TweenMax.to(h,.5,{delay:.7,scaleX:1,scaleY:1,ease:Back.easeOut}),c.x=480,c.y=608,c.scaleX=c.scaleY=0,TweenMax.to(c,.5,{delay:.8,scaleX:1,scaleY:1,ease:Back.easeOut}),l.x=600,l.y=600,l.scaleX=l.scaleY=0,TweenMax.to(l,.5,{delay:.9,scaleX:1,scaleY:1,ease:Back.easeOut}),d.x=540,d.y=650,d.scaleX=d.scaleY=0,TweenMax.to(d,.5,{delay:1,scaleX:1,scaleY:1,ease:Back.easeOut}),u.rotation=0,u.y=250,u.x=-350,TweenMax.to(u,.8,{delay:1.2,x:-40,rotation:15,ease:Back.easeOut}),m.y=1e3,m.x=0,TweenMax.to(m,.6,{rotation:2,repeat:-1,yoyo:!0}),f.y=950,f.x=0,TweenMax.to(f,.6,{rotation:-2,repeat:-1,yoyo:!0}),_.y=1e3,_.x=650,TweenMax.to(_,.6,{rotation:-2,repeat:-1,yoyo:!0}),v.y=-5,v.x=650,TweenMax.to(v,.6,{rotation:-2,repeat:-1,yoyo:!0}),C.y=-5,C.x=-5,TweenMax.to(C,.6,{rotation:-2,repeat:-1,yoyo:!0}),o.x=480,o.y=1080,TweenMax.delayedCall(1,function(){o.y=700,TweenMax.to(o,25,{y:-300,ease:Linear.easeNone,repeat:-1})}),i.y=this.title.iy=.5*i.height,i.scaleX=0,i.alpha=0,TweenMax.to(i,.5,{delay:2,alpha:1,scaleX:1,ease:Back.easeOut}),TweenMax.delayedCall(2,function(){GSound.g().play("titlePage",0,1,.6)}),y.x=200,y.y=1.3*GConfig.sceneHeight,TweenMax.to(y,.4,{delay:.3,y:950}),T.x=560,T.y=800,T.scaleX=T.scaleY=0,TweenMax.to(T,.6,{delay:1.2,x:460,y:747,scaleX:1,scaleY:1}),TweenMax.delayedCall(1.2,function(){GSound.g().play("engine",0,1,.6)}),n.x=GConfig.cpX,n.y=1050,TweenMax.to(n,.6,{delay:1.8,y:900,ease:Back.easeOut}),n.once(KButton.TOUCH_END,function(){n.visible=!1;var e=document.getElementById("background");e.src=document.getElementsByTagName("canvas")[0].toDataURL("image/png"),GC.g().to("reel")}),this.hide_0=GR.createBitmap("hide_0"),this.addChildAt(this.hide_0,1),this.hide_0.x=50,this.hide_0.y=this.hide_0.iy=65,this.hide_1=GR.createBitmap("hide_1"),this.addChildAt(this.hide_1,1),this.hide_1.x=450,this.hide_1.y=this.hide_1.iy=65,this.hide_2=GR.createBitmap("hide_2"),this.addChildAt(this.hide_2,6),this.hide_2.x=this.hide_2.ix=-200,this.hide_2.y=this.hide_2.iy=600,this.hide_2.scaleX=this.hide_2.scaleY=.9,this.hide_3=GR.createBitmap("hide_3"),this.addChildAt(this.hide_3,6),this.hide_3.x=this.hide_3.ix=-280,this.hide_3.y=this.hide_3.iy=850,this.hide_3.scaleX=this.hide_3.scaleY=1.2,this.hide_4=GR.createBitmap("hide_4"),this.addChildAt(this.hide_4,6),this.hide_4.x=this.hide_4.ix=-240,this.hide_4.y=this.hide_4.iy=440,this.hide_4.scaleX=this.hide_4.scaleY=.9,this.hide_5=GR.createBitmap("hide_5",1),this.addChildAt(this.hide_5,1),this.hide_5.x=this.hide_5.ix=820,this.hide_5.y=this.hide_5.iy=450,this.hide_5.scaleX=this.hide_5.scaleY=.5,this.hide_6=GR.createBitmap("hide_6",1),this.scene.addChildAt(this.hide_6,3),this.hide_6.x=this.hide_6.ix=930,this.hide_6.y=this.hide_6.iy=940,this.hide_6.scaleX=this.hide_6.scaleY=1;var x=this;this.hide_0.visible=this.hide_1.visible=!1,TweenMax.delayedCall(3.2,function(){x.hide_0.visible=x.hide_1.visible=!0,x.scene.addEventListener(egret.TouchEvent.TOUCH_BEGIN,x.touchBeginHandler,x)}),TweenMax.delayedCall(1.6,function(){x.scene.addEventListener(egret.TouchEvent.TOUCH_BEGIN,x.touchBeginHandler,x)}),TweenMax.delayedCall(2.5,function(){TweenMax.to(x.scene,1,{scaleX:1,scaleY:1}),TweenMax.to(x.sceneLow,1,{scaleX:1.5,scaleY:1.5}),TweenMax.to(x.sceneBottom,1,{y:0}),TweenMax.to(x.sceneCenter,1,{y:0}),TweenMax.to(x.sceneTop,1,{y:0}),TweenMax.to(x.sun,1,{y:x.sun.iy}),TweenMax.to(x.title,1,{y:x.title.iy})}),TweenMax.delayedCall(.6,function(){TweenMax.to(x.scene,1.6,{scaleX:.75,scaleY:.75}),TweenMax.to(x.sceneLow,1.6,{scaleX:1,scaleY:1}),TweenMax.to(x.sceneBottom,1.6,{y:60}),TweenMax.to(x.sceneCenter,1.6,{y:40}),TweenMax.to(x.sceneTop,1.6,{y:-20}),TweenMax.to(x.sun,1.6,{y:x.sun.iy+100}),TweenMax.to(x.title,1.6,{y:x.title.iy+50})})},t.prototype.touchBeginHandler=function(e){TweenMax.to(this.scene,this.scaleTime,{scaleX:.75,scaleY:.75}),TweenMax.to(this.sceneLow,this.scaleTime,{scaleX:1,scaleY:1}),TweenMax.to(this.sceneBottom,this.scaleTime,{y:60}),TweenMax.to(this.sceneCenter,this.scaleTime,{y:40}),TweenMax.to(this.sceneTop,this.scaleTime,{y:-20}),TweenMax.to(this.sun,this.scaleTime,{y:this.sun.iy+100}),TweenMax.to(this.title,this.scaleTime,{y:this.title.iy+50}),TweenMax.to(this.hide_0,this.scaleTime,{y:this.hide_0.iy-10}),TweenMax.to(this.hide_1,this.scaleTime,{y:this.hide_1.iy-30}),TweenMax.to(this.hide_2,this.scaleTime,{y:this.hide_2.iy-20,x:this.hide_2.ix+200}),TweenMax.to(this.hide_3,this.scaleTime,{y:this.hide_3.iy-140,x:this.hide_3.ix+190}),TweenMax.to(this.hide_4,this.scaleTime,{y:this.hide_4.iy-20,x:this.hide_4.ix+200}),TweenMax.to(this.hide_5,this.scaleTime,{y:this.hide_5.iy+60,x:this.hide_5.ix-220,rotation:15}),TweenMax.to(this.hide_6,this.scaleTime,{y:this.hide_6.iy,x:this.hide_6.ix-150}),TrackCode.startHide(),GSound.g().play("engine",0,1,.3),this.stage.once(egret.TouchEvent.TOUCH_END,function(){TweenMax.to(this.scene,this.scaleTime,{scaleX:1,scaleY:1}),TweenMax.to(this.sceneLow,this.scaleTime,{scaleX:1.5,scaleY:1.5}),TweenMax.to(this.sceneBottom,this.scaleTime,{y:0}),TweenMax.to(this.sceneCenter,this.scaleTime,{y:0}),TweenMax.to(this.sceneTop,this.scaleTime,{y:0}),TweenMax.to(this.sun,this.scaleTime,{y:this.sun.iy}),TweenMax.to(this.title,this.scaleTime,{y:this.title.iy}),TweenMax.to(this.hide_0,this.scaleTime,{y:this.hide_0.iy}),TweenMax.to(this.hide_1,this.scaleTime,{y:this.hide_1.iy}),TweenMax.to(this.hide_2,this.scaleTime,{y:this.hide_2.iy,x:this.hide_2.ix}),TweenMax.to(this.hide_3,this.scaleTime,{y:this.hide_3.iy,x:this.hide_3.ix}),TweenMax.to(this.hide_4,this.scaleTime,{y:this.hide_4.iy,x:this.hide_4.ix}),TweenMax.to(this.hide_5,this.scaleTime,{y:this.hide_5.iy,x:this.hide_5.ix,rotation:0}),TweenMax.to(this.hide_6,this.scaleTime,{y:this.hide_6.iy,x:this.hide_6.ix})},this)},t}(PageBase);__reflect(Start.prototype,"Start");var BulletinBoxs=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.blackRect=GR.createShape(),this.blackRect.graphics.beginFill(0),this.blackRect.graphics.drawRect(0,0,GConfig.sceneWidth,GConfig.sceneHeight),this.blackRect.graphics.endFill(),this.addChild(this.blackRect),this.blackRect.visible=!1,this.blackRect.alpha=0},t.prototype.show=function(e,i){if(void 0===i&&(i=null),this.type!=e){switch(this.type=e,e){case t.IS_SHARE:break;case"2":break;case"3":this.board=GR.createContainer()}this.addChild(this.board),this.board.alpha=0,TweenMax.to(this.blackRect,.3,{alpha:.9}),TweenMax.to(this.board,.3,{alpha:1})}},t.prototype.hide=function(){if(this.type="100",this.board){var e=this;TweenMax.to(this.board,.3,{alpha:0}),TweenMax.to(this.blackRect,.3,{alpha:.9,onComplete:function(){e.board&&e.numChildren>1&&e.removeChildAt(1)}})}},t}(egret.DisplayObjectContainer);BulletinBoxs.IS_SHARE="is_share",__reflect(BulletinBoxs.prototype,"BulletinBoxs");var GInterface=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.g=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.init=function(){egret.MainContext.instance.stage.addChild(this),this.menu=new NavMenu,this.addChild(this.menu),this.bulletin=new BulletinBoxs,this.addChild(this.bulletin)},t}(egret.DisplayObjectContainer);__reflect(GInterface.prototype,"GInterface");var NavMenu=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){},t}(egret.DisplayObjectContainer);__reflect(NavMenu.prototype,"NavMenu");var WebService=function(e){function t(){var t=e.call(this)||this;return t.prefix="http://"+window.location.host+"/",t}return __extends(t,e),t.g=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.doGetUserInfo=function(){if(!GConfig.isTest){var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.once(egret.IOErrorEvent.IO_ERROR,function(e){},this),e.once(egret.Event.COMPLETE,function(e){var t=JSON.parse(e.currentTarget.response),i=GameCongfig.mainUser.openid?"?openid="+GameCongfig.mainUser.openid:"",n=encodeURIComponent(location.origin+"/disney/index.html"+i),a=location.origin+"/disney/background/user/getAuthUrl";
0==t.errorcode?GameCongfig.mainUser.openid=t.data.openid:location.href=a+"?type=10&returnUrl="+n},this)}},t.prototype.doGamePoint=function(e,t){if(GConfig.isTest)return void GEvent.g().triggerEvent("doGamePoint");var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open("/disney/background/user/doGamePoint?point="+e+"&type="+t,egret.HttpMethod.POST),i.send(),i.once(egret.IOErrorEvent.IO_ERROR,function(e){},this),i.once(egret.Event.COMPLETE,function(e){var t=JSON.parse(e.currentTarget.response),i=encodeURIComponent(location.origin+"/disney/index.html"),n=location.origin+"/disney/background/user/getAuthUrl";egret.log(t),0==t.errorcode?(GameCongfig.toDayMax=2==t.data.ret,GEvent.g().triggerEvent("doGamePoint")):location.href=n+"?type=10&returnUrl="+i},this)},t.prototype.doShare=function(){if(GConfig.isTest)return void GEvent.g().triggerEvent("doShare");var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open("/disney/background/user/doShare",egret.HttpMethod.POST),e.send(),e.once(egret.IOErrorEvent.IO_ERROR,function(e){},this),e.once(egret.Event.COMPLETE,function(e){var t=JSON.parse(e.currentTarget.response),i=encodeURIComponent(location.origin+"/disney/index.html"),n=location.origin+"/disney/background/user/getAuthUrl";0==t.errorcode?GEvent.g().triggerEvent("doShare"):location.href=n+"?type=10&returnUrl="+i},this)},t.prototype.doShareComeBack=function(e){if(GConfig.isTest)return void GEvent.g().triggerEvent("doShareComeBack");var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open("/disney/background/user/doShareComeBack?openid="+e,egret.HttpMethod.POST),t.send(),t.once(egret.IOErrorEvent.IO_ERROR,function(e){},this),t.once(egret.Event.COMPLETE,function(e){var t=JSON.parse(e.currentTarget.response),i=encodeURIComponent(location.origin+"/disney/index.html"),n=location.origin+"/disney/background/user/getAuthUrl";0==t.errorcode?GEvent.g().triggerEvent("doShareComeBack"):location.href=n+"?type=10&returnUrl="+i},this)},t}(egret.EventDispatcher);__reflect(WebService.prototype,"WebService");